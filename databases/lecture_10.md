# Функциональные зависимости и Нормальные формы

## Термины
**Атрибут** - свойство некоторой сущности - столбец
**Домен**  - множество допустимых значений, которые может принимать атрибут - множество всех столбцов
**Кортеж** - конечное множество взаимосвязанных допустимых значений атрибутов, которые вместе описывают некоторую сущность - строку таблицы

**Отношение** - конечное множестов картежей - таблица
**Схема отношения** - конечное множество атрибутов, определяющих некоторую сущность

**Проекция** - отношение, полученное из заданного путем удаления или перестановки некоторых атрибутов

## Функциональная зависимость
**Функциональная зависимость** между атрибутами X и Y означает, что для любого допустимого набора кортежей в данном отношении выполнено условие -> если два кортежа совпадают по значению X, то они совпадают по значению Y

![[images/Pasted image 20230224184319.png]]

В данном примере функциональную зависимость составляют, например:
- *student_id* -> *name*, т.е. по атрибуту *student_id* однозначно задается экземпляр сущности (строка) с атрибутом *name*
- *student_id* -> *city*

## Аномалии
**Аномалией** называется такая ситуация в таблице БД, которая приводит к притиворечию в БД либо существенно усложнаяет обработку БД. 

Причиной является изишнее дублирование данных в таблице, которое вызывается наличием функциональных зависимостей от не ключевых атрибутов

Существует 3 вида аномалий: 
- Аномалии-модификации (при изменении данных в таблице, информация может быть утеряна, например, если у нас был единственный экземпляр с атрибутом `room` равным *IVC5*, мы изменили его на другое значение, теперь в БД нет никакой информации об *IVC5*, что может значить, что такой аудитории нет вовсе)
- Аномалии-удаления (для удаления экземпляра из таблицы придется пройти по всем функцональным связям, что приведет к просмотру всей таблицы)
- Аномалии-добавления

## Нормальные формы
**Нормальная форма** - набор требований для структуры таблицы для устранения из БД избыточных функциональных зависимостей между атрибутами (полями таблиц)

#### Метод нормальных форм
**Метод нормальных форм** состоит в сборе информации об объектах решения задачи в рамках одного отношения и последующей декомпозиции этого отношения на нексколько взаимосвязных отношений на основе процедур номрмализации отношений

**Декомпозиция**
- без потерь (хорошо, через Natural Join получим исходное отношение)
- с потерямя (очень плохо, через Natural Join не получим исходное отношение)

**Цель нормализации:** исключение избыточного дублирования данных, которое является причиной появления аномалий

![[images/Pasted image 20230224191923.png]]

**Теорема Хита**
	Пусть A,B,C - непересекающиеся множества атрибутов отношения R(A,B,C). Декомпозиция отношения R на проекции $R_1 = R(A,B)$ и $R_2 = R(A,C)$ будет декомпозицией без потерь, если выполняется функциональная зависимость A -> B

## Номральные формы

### Первая нормальная форма
Отношение находится в 1НФ, если все его абрибуты являются простыми, все используемые домены должны содержать только ==скалярные значения==. Не должно быть повторений строк в таблице.

![[images/Pasted image 20230225160552.png]]


## Вторая нормальная форма
Отношение находится во 2НФ, если оно находится в 1НФ и каждый не ключевой атриут неприводимо зависит от первичного ключа
Здесь, неприводимость означает, что в составе потенциального ключа отсутствует подмножество атрибутов, от которого можно также вывести данную функциональную зависимость

![[images/Pasted image 20230225160859.png]]

## Третья нормальная форма
Переменная отношения находится в 3НФ тогда и только тогда, когда она находится в 2НФ, и отсутствуют транзитивные функциональные зависимости неключевых атрибутов от ключевых

![[images/Pasted image 20230225161539.png]]



# Вопросы
1. Что такое скалярные значения?